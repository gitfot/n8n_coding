# 📊 CoinMarketCap AI Data Analyst Agent

## 🚀 工作流程概述

**CoinMarketCap AI 分析师代理** 是一个基于 **n8n** 构建的模块化 AI 驱动系统，旨在提供**实时加密市场洞察**。它通过三个专业代理直接连接到 CoinMarketCap API：

- **加密货币代理** – 市场列表、行情、转换和代币信息。
- **交易所和社区代理** – 热门话题、交易所表现和情绪。
- **DEXScan 代理** – 去中心化市场上的流动性、交易量和 OHLC 数据。

### 🎯 **主要功能**：

- 获取最新的代币列表和排名变动
- 追踪实时价格行情并在不同货币之间转换价值
- 比较市值、交易量和主导地位等指标
- 监控交易所交易对和交易量
- 分析社区情绪和恐惧与贪婪指数
- 可视化 DEX 流动性和历史交易趋势

### 🔌 所需的子代理工具：

1. **CoinMarketCap_Crypto_Agent_Tool** – 处理加密货币行情、列表、转换
2. **CoinMarketCap_Exchange_and_Community_Agent_Tool** – 处理交易所、热门代币、恐惧与贪婪指数
3. **CoinMarketCap_DEXScan_Agent_Tool** – 处理去中心化流动性、交易对行情、OHLCV 分析

安装后，这些代理将启用高级功能：

### ✅ 关键 AI 功能：

- 分析所有加密货币的市值、交易量、供应指标
- 跟踪新上市和涨跌幅最大的加密货币
- 评估中心化交易所 (CEX) 和去中心化交易所 (DEX) 市场中的交易对和流动性
- 检索情绪指标和热门讨论

---

## 📌 如何使用工作流

### ✅ 步骤 1：提供输入

- 使用代币 `symbol`、`slug` 或 `ID`
- 以 **Unix 格式**设置时间戳（`before`、`after`）以获取历史数据
- 需要时使用 `chain`、`limit` 和 `start` 进行分页

### ✅ 步骤 2：执行 API 工具

- AI 将查询路由到子代理：**加密货币**、**交易所** 或 **DEXScan**

### ✅ 步骤 3：获取响应和输出

- 结果可以输出到 Telegram、仪表板或 n8n HTTP 响应节点

### 示例输入

1. 💬 市场情报

    - “目前交易量排名前 5 的代币是什么？”
    - “过去 24 小时内涨幅最大的币种有哪些？”
    - “今天加密货币总市值是多少？”
2. 代币洞察

    - “SOL 的美元价格是多少？”
    - “1000 USDT 能兑换多少 BTC？”
    - “给我 Dogecoin 的描述和白皮书链接。”
3. 交易所与情绪

    - “今天的恐惧与贪婪指数是多少？”
    - “列出资产持有量最高的交易所。”
    - “给我关于币安的信息——它是什么时候推出的？”
4. DEX 数据

    - “给我看看以太坊上排名前列的 DEX 现货交易对。”
    - “Solana 上 SOL-USDT 在过去 7 天的 OHLCV 数据是多少？”
    - “PancakeSwap 上刚刚发生了什么交易？”

---

## 🧠 节点结构摘要

### **1️⃣ 分析师大脑**

- **模型**：GPT-4o Mini
- **功能**：理解用户查询，将任务委派给代理

### **2️⃣ 内存缓冲区**

- 在提示之间存储会话状态和上下文

### **3️⃣ 工具触发器**

- **toolWorkflow()**  函数调用：

  - `CoinMarketCap_Crypto_Agent_Tool`
  - `CoinMarketCap_Exchange_and_Community_Agent_Tool`
  - `CoinMarketCap_DEXScan_Agent_Tool`

---

## ⚠️ 注意：

- 📎 确保每个代理的 API 凭据已安装且有效
- 📍 每个工具独立运行，但将结果反馈给监督者进行综合
- 🧩 在每次子代理调用中一致使用 `message` 和 `sessionId` 参数